<?xml version="1.0" encoding="UTF-8"?>
<!-- FilmNote/src/main/java/mapper/userMapper.xml -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="userSQL">

	<!-- 회원정보 수정 -->
	<update id="update" parameterType="String">
		UPDATE user SET name = #{name}
						,uid =#{uid}
			            , upwd = #{upwd}
			            , gender = #{gender}
			            , birth1 = #{birth1}
			            , birth2 = #{birth2}			            
			            , birth3 = #{birth3}
			            , email1 = #{email1}
			            , email2 = #{email2}
			            , tel1 = #{tel1}
			            , tel2 = #{tel2}
			            , tel3 = #{tel3}
			         <!--    , logtime = sysdate where id = #{id} -->
			         ,logtime = now() where id = #{id}
	</update>
	<!--  회원탈퇴 -->
	<delete id="withdraw" parameterType="String">
	DELETE FROM user WHERE uid = #{uid}
</delete>

    <!-- 사용자 로그인 -->
    <select id="loginUser" parameterType="map" resultType="user">
        SELECT uid, upwd, uname, gender, birth1, birth2, birth3, email1, email2, tel1, tel2, tel3
        FROM user_tb
        WHERE uid = #{uid} AND upwd = #{upwd}
    </select>
    
    <!-- 사용자 등록 -->
    <insert id="insertUser" parameterType="user">
    INSERT INTO user_tb (uid, upwd, uname, gender, birth1, birth2, birth3, email1, email2, tel1, tel2, tel3)
    VALUES (#{uid}, #{upwd}, #{uname}, #{gender}, #{birth1}, #{birth2}, #{birth3}, #{email1}, #{email2}, #{tel1}, #{tel2}, #{tel3})
	</insert>

</mapper>